<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title></title>
        <style>
            img{
                width: 50px;
                height:50px;
            }
        </style>
    </head>
    <body>
        <div id="team">
            <h1>Equipos</h1>
            <form id="formulario">

            </form>
            <select id="selectTeam">

            </select>
        </div>
        <div id="apuestas">
            <h1>Página de apuestas</h1>
        </div>
        <script src="JS/jquery-3.5.1.min.js"></script>
        <script>
        $(document).ready(function () {
            var urlApiDept = "https://apichampions.azurewebsites.net/";
            var request = "api/Equipos/";
            console.log("get: " + request);

            $.ajax({
                url: urlApiDept + request
                , type: "GET"
                , success: function (data) {
                    console.log("GET AJAX ");
                    $.each(data,function (index, dept) {
                        console.log("each: ");
                        var option = $("<option>", { text: dept.nombre, value: dept.idEquipo });
                        $("#selectTeam").append(option);
                    });

                    $("#selectTeam").change(function () {
                        var seleccion = $(this).val();
                        console.log("seleccion: ");
                        var request2 = "api/Equipos/" + seleccion;

                        $.ajax({
                            url: urlApiDept + request2
                            , type: "GET"
                            , success: function (data) {
                                $("#formulario").empty();
                                console.log("Ajax Details Team");
                                var table = $("<table>", { id: "tableTeam" });
                                var thead = $("<thead>");
                                var trHead = $("<tr>");
                                var tdHead = $("<td>", { text: data.nombre });

                                var tbody = $("<tbody>");
                                var trBody = $("<tr>");
                                var tdBody = $("<td>", { text: "Champions: " + data.champions + "\n " + data.descripcion });
                                var image = $("<img>", {src: data.imagen});

                                trHead.append(tdHead);
                                thead.append(trHead);

                                tdBody.append(image);
                                trBody.append(tdBody);
                                tbody.append(trBody);

                                table.append(thead);
                                table.append(tbody);
                                $("#formulario").append(table);
                            }
                        });
                    });
                }
            });
        });
        </script>
    </body>
</html>